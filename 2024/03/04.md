## 取り組んだ課題一覧
- ログイン用のフォーム…type属性にpasswordを指定すると、フォームに入力するパスワードが伏せ字になる
- ex) <input type=“password”>
- ルーティングは同じ名前でもメソッド(GETとPOST)が異なれば、別のルーティングとして扱われる。
- ユーザー認証とは本人確認のことで、Webアプリではメールアドレスとパスワードを組み合わせた本人確認が一般的となる。
- ユーザ検索をする。送信されたフォームの値を使用してユーザー検索をする。SELECTクエリを実行して、送信されたメールアドレスと一致するユーザの情報を取得する。
- npm install express-sessionでセッションを管理するためのパッケージをインストールできる。
- const session = require(‘express-session);
- app.use(session({オブジェクト}));でセッション管理の準備が整う。
- express-sessionパッケージでreq.sessionオブジェクトに渡した値を管理できるようになる。
- ↑を用いて、ユーザー認証後セッション情報にユーザIDを保存する。保存にはreq.session.プロパティ名 = 値;とする。
- ex)
- req.session.userId = results[0].id;

- 常にログイン状態を確認する。

- サーバーはリクエストに一致するルーティングを探して実行する。その際app.jsに書かれた順番上から探し、一致したルーティングを実行する。
- app.use関数は、すべてのリクエストに対応する。そのためルーティング処理の一番最初に書くことで、毎回実行されreq, res, nextの３つの引数を受け取ることができる。
- app.use関数の引数で受け取ったnextは処理の中で関数として使用することができ、next関数を呼び出すと、リクエストに一致する処理を実行することができる。

- ユーザー名をセッションを使って管理する。
- req.session.username = results[0[.username;でデータベースから取得したusernameをセッション情報に保存する。

- app.useからEJSファイルに値を渡したい時、res.localsオブジェクトを使用する。
- res.localsオブジェクトを使用すると、res.renderがなくてもEJSファイルに値を渡すことができる。アプリ全体で使用する値もres.localsオブジェクトを使用すると良い
- EJSに渡されたres.localsオブジェクトはlocalsオブジェクトに変換される。そのため値を用いる時にはlocals.プロパティ名となり、resがつかなくなることに注意する。
- ex) 
- res.locals.username = req.session.username;
- <%= locals.プロパティ名 %>
## 次やること
- Node.js学習レッスンⅤの続き
## 感じたこと
- 少しづつだけれど、Node.jsの書き方がわかってきて楽しいと感じた。
## 学習時間
- 2H
 
